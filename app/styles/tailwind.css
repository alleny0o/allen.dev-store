@import 'tailwindcss';

@plugin "tailwindcss-animate";
@plugin "@tailwindcss/typography";

/**
 * THEME CONFIGURATION
 * Base theme tokens including fonts, animations, and keyframes.
 */

@theme {
  /* Font families (referenced by Tailwind's font- utilities) */
  --font-heading: var(--heading-font-family);
  --font-body: var(--body-font-family);
  --font-extra: var(--extra-font-family);

  /* Animations */
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    0% {
      height: 0;
    }
    100% {
      height: var(--radix-accordion-content-height);
    }
  }

  @keyframes accordion-up {
    0% {
      height: var(--radix-accordion-content-height);
    }
    100% {
      height: 0;
    }
  }
}

/**
 * INLINE THEME COLORS
 * Converts CSS custom properties to Tailwind-compatible color tokens.
 * These are generated dynamically from Sanity color schemes.
 */

@theme inline {
  --color-background: rgb(var(--background));
  --color-foreground: rgb(var(--foreground));
  --color-border: rgb(var(--border));
  --color-input: rgb(var(--input));
  --color-ring: rgb(var(--ring));
  --color-primary: rgb(var(--primary));
  --color-primary-foreground: rgb(var(--primary-foreground));
  --color-secondary: rgb(var(--secondary));
  --color-secondary-foreground: rgb(var(--secondary-foreground));
  --color-muted: rgb(var(--muted));
  --color-muted-foreground: rgb(var(--muted-foreground));
  --color-accent: rgb(var(--accent));
  --color-accent-foreground: rgb(var(--accent-foreground));
  --color-popover: rgb(var(--popover));
  --color-popover-foreground: rgb(var(--popover-foreground));
  --color-card: rgb(var(--card));
  --color-card-foreground: rgb(var(--card-foreground));
  --color-destructive: rgb(var(--destructive));
  --color-destructive-foreground: rgb(var(--destructive-foreground));
}

/**
 * CUSTOM UTILITIES
 * Reusable utility classes for layout, spacing, and UI elements.
 */

/* Container with responsive padding */
@utility container {
  margin-inline: auto;
  max-width: var(--site-container-max-width, 1536px);
  padding-inline: var(--container-padding, 1rem);

  @variant md {
    --container-padding: 1.5rem;
  }

  @variant xl {
    --container-padding: 2rem;
  }

  @variant 2xl {
    --container-padding: 2.5rem;
  }
}

/* Section padding with responsive scaling */
@utility section-padding {
  padding-bottom: calc(var(--paddingBottom) * 0.75);
  padding-top: calc(var(--paddingTop) * 0.75);

  @variant sm {
    padding-bottom: var(--paddingBottom);
    padding-top: var(--paddingTop);
  }
}

/* Separator line with dynamic opacity and height */
@utility separator-line {
  border-bottom-width: var(--separator-height);
  border-bottom-color: rgb(var(--border) / calc(var(--separator-opacity) / 100));
}

/* Touch-friendly hitbox (minimum 44x44px for accessibility) */
@utility touch-hitbox {
  position: relative;
  
  &::before {
    content: '';
    position: absolute;
    display: block;
    width: 100%;
    height: 100%;
    min-height: 44px;
    min-width: 44px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 9999;
  }
}

/**
 * BASE STYLES
 * Global element styles and typography system.
 */

@layer base {
  /* Universal border and focus styles */
  * {
    border-color: var(--color-border);

    &:focus-visible {
      outline-color: var(--color-ring);
    }
  }

  /* Body typography from Sanity settings */
  body {
    font-family: var(--body-font-family), var(--body-font-type);
    font-size: calc(var(--body-base-size) * 1px);
    line-height: var(--body-line-height);
    letter-spacing: calc(var(--body-letter-spacing) * 1px);
    -webkit-font-smoothing: var(--body-font-webkit-font-smoothing);
    -moz-osx-font-smoothing: var(--body-font-moz-osx-font-smoothing);
  }

  /* Clickable elements */
  button,
  [role='button'] {
    cursor: pointer;
  }

  /* Heading styles (shared properties) */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--heading-font-family), var(--heading-font-type);
    letter-spacing: calc(var(--heading-letter-spacing) * 1px);
    line-height: var(--heading-line-height);
    text-transform: var(--heading-capitalize);
    -webkit-font-smoothing: var(--heading-font-webkit-font-smoothing);
    -moz-osx-font-smoothing: var(--heading-font-moz-osx-font-smoothing);
  }

  /* Heading scale (proportional sizing) */
  h1 { font-size: calc(var(--heading-base-size) * 1px); }
  h2 { font-size: calc(var(--heading-base-size) * 0.75 * 1px); }
  h3 { font-size: calc(var(--heading-base-size) * 0.65 * 1px); }
  h4 { font-size: calc(var(--heading-base-size) * 0.5 * 1px); }
  h5 { font-size: calc(var(--heading-base-size) * 0.45 * 1px); }
  h6 { font-size: calc(var(--heading-base-size) * 0.375 * 1px); }

  /* Navigation typography */
  .nav-text {
    font-family: var(--nav-font-family), var(--nav-font-type);
    font-size: calc(var(--nav-base-size) * 1px);
    line-height: var(--nav-line-height);
    letter-spacing: calc(var(--nav-letter-spacing) * 1px);
    text-transform: var(--nav-capitalize);
    -webkit-font-smoothing: var(--nav-font-webkit-font-smoothing);
    -moz-osx-font-smoothing: var(--nav-font-moz-osx-font-smoothing);
  }

  /* Announcement bar typography */
  .announcement-text {
    font-family: var(--announcement-font-family), var(--announcement-font-type);
    font-size: calc(var(--announcement-base-size) * 1px);
    line-height: var(--announcement-line-height);
    letter-spacing: calc(var(--announcement-letter-spacing) * 1px);
    text-transform: var(--announcement-capitalize);
    -webkit-font-smoothing: var(--announcement-font-webkit-font-smoothing);
    -moz-osx-font-smoothing: var(--announcement-font-moz-osx-font-smoothing);
  }

  /* Announcement arrow (auto-scales with text size) */
  .announcement-arrow {
    width: calc(var(--announcement-base-size) * 1px + 4px);
    height: calc(var(--announcement-base-size) * 1px + 4px);
  }

  /* Logo typography */
  .logo-text {
    font-family: var(--logo-font-family), var(--logo-font-type);
    font-size: calc(var(--logo-base-size) * 1px);
    line-height: var(--logo-line-height);
    letter-spacing: calc(var(--logo-letter-spacing) * 1px);
    text-transform: var(--logo-capitalize);
    -webkit-font-smoothing: var(--logo-font-webkit-font-smoothing);
    -moz-osx-font-smoothing: var(--logo-font-moz-osx-font-smoothing);
  }
}